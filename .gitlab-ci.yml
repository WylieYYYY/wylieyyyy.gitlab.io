image: node:alpine

stages:
    - lint
    - build

eslint:
    stage: lint
    script:
        - npm i
        - npm test

pages:
    stage: build
    script:
        - npm i
        - npm run build
        - find public -type f -regex '.*\.\(css\|html\|js\|json\)$' -exec gzip -k {} \;
    artifacts:
        paths:
            - public
    only:
        - pages
